// stats Table

CREATE TABLE stats (
    id serial PRIMARY KEY,
    email text NOT NULL,
    weight NUMERIC NOT NULL,
    musclemass NUMERIC NOT NULL,
    fatlevel NUMERIC NOT NULL,
    bmi NUMERIC NOT NULL,
    vv NUMERIC NOT NULL,
    percentwater NUMERIC NOT null,
    statsdate date NOT NULL);

db('stats')
.returning('*')
.insert({	
			email: email,
			weight: weight,
			musclemass:musclemass,
			fatlevel: fatlevel,
			bmi: bmi,
			vv:vv,
			percentwater: percentwater,
			statsdate: statsdate


//Package Table

CREATE TABLE package (
	id serial PRIMARY KEY,
	email text NOT NULL,
	datestarted DATE NOT NULL,
	packageid text NOT NULL,
	completed BOOLEAN NOT NULL,
    active BOOLEAN NOT NULL,
	sessioncount smallint,
	maxsessions SMALLINT NOT null);

// User Table

CREATE TABLE users (
	id serial PRIMARY KEY,
	fname varchar(100),
	lname varchar(100),
	email text NOT NULL,
	privacy boolean NOT NULL,
	joined timestamp NOT NULL,
	height smallint,
	isadmin boolean,
	istrainer boolean,
	trainer varchar(100));


return trx('users')
				.returning('*')
				.insert({
					fname: fname,
					lname: lname,
					email: loginEmail[0],
					height: height,
					privacy: privacy,
					joined: new Date(),
					isadmin: false,
					istrainer: false,
					trainer: 'Desire'
					})

//Login Table
CREATE TABLE login (
	id serial PRIMARY KEY,
	hash varchar(100) NOT NULL,
	email text NOT NULL);

//sessions Table

CREATE TABLE sessions (
	id serial PRIMARY KEY,
	sessiondate date NOT NULL,
	email text NOT NULL,
	packagedate date,
	packageid smallint);


	SELECT * FROM users LEFT OUTER JOIN package ON users.email = package.email WHERE users.email IN (SELECT email FROM users WHERE users.trainer = 'Desire') AND (package.packageid IS NULL OR package.active IS true);


CREATE TABLE plan (
	id serial PRIMARY KEY,
	sessiondate date NOT NULL,
	email text NOT NULL,
	group0,
	group1,
	group2,
	group3,
	group4,
	group5,
	group6,
	exercise1 varchar(100),
	exercise2 varchar(100),
	exercise3 varchar(100),
	exercise4 varchar(100),
	exercise5 varchar(100),
	exercise6 varchar(100),
	exercise7 varchar(100),
	exercise8 varchar(100),
	exercise9 varchar(100),
	exercise10 varchar(100)
);